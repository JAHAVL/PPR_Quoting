(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{6784:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients",function(){return n(2076)}])},2519:function(e,t,n){"use strict";var a=n(9815),r=n(5893),s=n(7294),i=n(5232),o=n.n(i);t.Z=function(e){var t=e.columns,n=e.data,i=e.keyField,c=e.emptyMessage,l=e.onRowClick,u=e.className,d=e.isLoading,f=e.sortable,p=void 0===f||f,_=e.pagination,h=void 0===_||_,m=e.itemsPerPage,g=void 0===m?10:m,b=(0,s.useState)(null),C=b[0],j=b[1],v=(0,s.useState)("asc"),y=v[0],x=v[1],N=(0,s.useState)(1),D=N[0],w=N[1],T=function(e){p&&(C===e?x("asc"===y?"desc":"asc"):(j(e),x("asc")))},A=s.useMemo(function(){return C?(0,a.Z)(n).sort(function(e,t){var n=e[C],a=t[C];return n===a?0:"string"==typeof n&&"string"==typeof a?"asc"===y?n.localeCompare(a):a.localeCompare(n):null==n?"asc"===y?-1:1:null==a?"asc"===y?1:-1:"asc"===y?n<a?-1:1:n<a?1:-1}):n},[n,C,y]),k=Math.ceil(A.length/g),Z=h?A.slice((D-1)*g,D*g):A,S=function(e){w(e)};return(0,r.jsx)("div",{className:"".concat(o().tableContainer," ").concat(void 0===u?"":u),children:void 0!==d&&d?(0,r.jsx)("div",{className:o().loading,children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o().tableWrapper,children:(0,r.jsxs)("table",{className:o().table,children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:t.map(function(e,t){return(0,r.jsx)("th",{className:"".concat(o().tableHeader," ").concat(e.className||""," ").concat(p?o().sortable:""),onClick:function(){return"string"==typeof e.accessor&&T(e.accessor)},children:(0,r.jsxs)("div",{className:o().headerContent,children:[e.header,p&&"string"==typeof e.accessor&&C===e.accessor&&(0,r.jsx)("span",{className:"asc"===y?o().sortAsc:o().sortDesc,children:"asc"===y?"▲":"▼"})]})},t)})})}),(0,r.jsx)("tbody",{children:Z.length>0?Z.map(function(e){return(0,r.jsx)("tr",{onClick:function(){return l&&l(e)},className:l?o().clickableRow:"",children:t.map(function(t,n){var a,s;return(0,r.jsx)("td",{className:t.className||"",children:"function"==typeof t.accessor?t.accessor(e):e[t.accessor]},n)})},String(e[i]))}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t.length,className:o().emptyMessage,children:void 0===c?"No data available":c})})})]})}),h&&k>1&&(0,r.jsxs)("div",{className:o().pagination,children:[(0,r.jsx)("button",{className:o().pageButton,disabled:1===D,onClick:function(){return S(D-1)},children:"<"}),Array.from({length:k},function(e,t){return t+1}).map(function(e){return(0,r.jsx)("button",{className:"".concat(o().pageButton," ").concat(D===e?o().activePage:""),onClick:function(){return S(e)},children:e},e)}),(0,r.jsx)("button",{className:o().pageButton,disabled:D===k,onClick:function(){return S(D+1)},children:">"})]})]})})}},2076:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(7568),r=n(7582),s=n(5893),i=n(7294),o=n(9008),c=n.n(o),l=n(1163),u=n(3884),d=n.n(u),f=n(734),p=n(6345),_=n(2519),h=n(8223),m=n.n(h),g=n(7257),b=n(9025),C=n(2390),j=function(e){var t=e.status,n=t.charAt(0).toUpperCase()+t.slice(1);return(0,s.jsx)(g.Z,{type:t.toLowerCase(),label:n,className:m().statusBadge})},v=function(e){var t=e.clients,n=e.isLoading,a=(0,l.useRouter)(),r=[{header:"Name",accessor:"name"},{header:"Status",accessor:function(e){return(0,s.jsx)(j,{status:e.status})},className:m().centerAlign},{header:"Actions",accessor:function(e){return(0,s.jsxs)("div",{className:m().actionButtons,children:[(0,s.jsx)(C.Z,{email:e.email,clientId:e.id}),(0,s.jsx)(b.Z,{phone:e.phone,clientId:e.id})]})},className:m().centerAlign}],i=function(e){a.push("/clients/".concat(e.id))};return(0,s.jsx)(_.Z,{columns:r,data:t,keyField:"id",onRowClick:i,isLoading:void 0!==n&&n,emptyMessage:"No clients found",className:m().clientsTable,sortable:!0,pagination:!0})},y=n(6759),x=n(3903),N=n(7052),D=function(){(0,l.useRouter)();var e=(0,i.useState)([]),t=e[0],n=e[1],o=(0,i.useState)(!0),u=o[0],_=o[1],h=(0,i.useState)(null),m=h[0],g=h[1],b=(0,i.useState)(""),C=b[0];b[1];var j=(0,i.useState)(!1),D=j[0];j[1];var w=(0,i.useState)(!1),T=w[0],A=w[1];(0,i.useEffect)(function(){var e;(e=(0,a.Z)(function(){var e,t,a;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),_(!0),[4,x.hi.clients.getAll()];case 1:return n(e.sent().map(function(e){return{id:e.id,name:e.name,email:e.email||"",phone:e.phone||"",address:e.address||"",joinDate:e.joinDate||"",status:e.status,projectCount:e.projectCount||0}})),g(null),[3,4];case 2:return a=e.sent(),console.error("Failed to fetch clients:",a),g("Failed to load clients. Please try again."),[3,4];case 3:return _(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[]);var k=t.filter(function(e){var t=C.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.includes(C)||e.address.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)}),Z=function(){A(!0)},S=function(){var e;(e=(0,a.Z)(function(){var e,t,a;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),_(!0),[4,x.hi.clients.getAll()];case 1:return n(e.sent().map(function(e){return{id:e.id,name:e.name,email:e.email||"",phone:e.phone||"",address:e.address||"",joinDate:e.joinDate||"",status:e.status,projectCount:e.projectCount||0}})),g(null),[3,4];case 2:return a=e.sent(),console.error("Failed to fetch clients:",a),g("Failed to load clients. Please try again."),[3,4];case 3:return _(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"PPR - Clients"}),(0,s.jsx)("meta",{name:"description",content:"Paver Pressure and Repair Clients"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(p.Z,{title:"PPR",showBackButton:!0,backHref:"/admin-dashboard"}),(0,s.jsxs)("main",{className:d().main,children:[(0,s.jsx)("div",{className:d().pageHeader,children:(0,s.jsxs)("div",{className:d().titleContainer,children:[(0,s.jsx)(y.Z,{className:d().pageIcon}),(0,s.jsx)("h1",{className:d().pageTitle,children:"Clients"}),(0,s.jsx)("button",{className:d().createButton,onClick:Z,"aria-label":"Create new client",children:"+"})]})}),u?(0,s.jsx)("div",{className:d().loadingContainer,children:(0,s.jsx)("p",{children:"Loading clients..."})}):m?(0,s.jsxs)("div",{className:d().errorContainer,children:[(0,s.jsx)("p",{children:m}),(0,s.jsx)("button",{onClick:function(){return window.location.reload()},children:"Try Again"})]}):(0,s.jsx)("div",{className:d().tableContainer,children:(0,s.jsx)(v,{clients:k,isLoading:D})}),(0,s.jsx)(N.Z,{isOpen:T,onClose:function(){return A(!1)},onClientAdded:S})]})]})]})}},5232:function(e){e.exports={tableContainer:"DataTable_tableContainer__G9n3a",tableWrapper:"DataTable_tableWrapper__G_oJk",table:"DataTable_table__Gt_63",tableHeader:"DataTable_tableHeader__BvfuQ",headerContent:"DataTable_headerContent__UYWqg",sortable:"DataTable_sortable__OW9dJ",sortAsc:"DataTable_sortAsc__ECBFf",sortDesc:"DataTable_sortDesc__N9hQF",clickableRow:"DataTable_clickableRow__CHypJ",emptyMessage:"DataTable_emptyMessage__GLjh4",loading:"DataTable_loading__gcydQ",pagination:"DataTable_pagination__lUPNv",pageButton:"DataTable_pageButton__3lzCp",activePage:"DataTable_activePage__VDLBU",statusPending:"DataTable_statusPending__59nQr",statusApproved:"DataTable_statusApproved__CfJek",statusRejected:"DataTable_statusRejected__UCaJI",statusCompleted:"DataTable_statusCompleted__hTXzh"}},3884:function(e){e.exports={main:"Clients_main__tOVzs",pageHeader:"Clients_pageHeader__AD6CM",titleContainer:"Clients_titleContainer__sNRSM",pageIcon:"Clients_pageIcon__AUV37",pageTitle:"Clients_pageTitle__YOERB",createButton:"Clients_createButton__pF6Nr",tableContainer:"Clients_tableContainer__wtedO",searchContainer:"Clients_searchContainer__g9tcC",searchInput:"Clients_searchInput__Gigm2",tableSection:"Clients_tableSection__H_CQI"}},943:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,{Z:function(){return a}})},1438:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return a}})},3375:function(e,t,n){"use strict";function a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return a}})},9815:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(943),r=n(3375),s=n(1566);function i(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||(0,r.Z)(e)||(0,s.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(943);function r(e,t){if(e){if("string"==typeof e)return(0,a.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,a.Z)(e,t)}}},8773:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});let a="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var r={randomUUID:a};let s,i=new Uint8Array(16),o=[];for(let c=0;c<256;++c)o.push((c+256).toString(16).slice(1));var l=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();e=e||{};let a=e.random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(i)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let c=0;c<16;++c)t[n+c]=a[c];return t}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(a)}}},function(e){e.O(0,[996,69,630,774,888,179],function(){return e(e.s=6784)}),_N_E=e.O()}]);