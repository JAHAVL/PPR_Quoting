(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{3872:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view-quote",function(){return n(9483)}])},4038:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(5694),i=n.n(a),s=function(e){var t=e.children,n=e.onClick,a=e.type,s=e.disabled,o=e.variant,l=e.size,c=e.fullWidth,u=e.className,d=[i().button,i()[void 0===o?"primary":o],i()[void 0===l?"medium":l],void 0===c||c?i().fullWidth:"",void 0===u?"":u,].filter(Boolean).join(" ");return(0,r.jsx)("button",{className:d,onClick:n,type:void 0===a?"button":a,disabled:void 0!==s&&s,children:t})};t.Z=s},8380:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(5208),i=n.n(a),s=function(e){var t=e.id,n=e.label,a=e.value,s=e.onChange,o=e.options,l=e.required,c=void 0!==l&&l,u=e.disabled,d=e.className;return(0,r.jsxs)("div",{className:"".concat(i().formGroup," ").concat(void 0===d?"":d),children:[(0,r.jsxs)("label",{htmlFor:t,className:i().label,children:[n,c&&(0,r.jsx)("span",{className:i().required,children:"*"})]}),(0,r.jsxs)("select",{id:t,value:a,onChange:s,required:c,disabled:void 0!==u&&u,className:i().select,children:[(0,r.jsx)("option",{value:"",children:"Select an option"}),o.map(function(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)})]})]})};t.Z=s},3630:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(194),i=n.n(a),s=function(e){var t=e.id,n=e.label,a=e.type,s=e.value,o=e.onChange,l=e.placeholder,c=e.min,u=e.max,d=e.step,h=e.required,_=e.disabled,m=e.className;return(0,r.jsxs)("div",{className:"".concat(i().formGroup," ").concat(m||""),children:[(0,r.jsx)("label",{htmlFor:t,className:i().label,children:n}),(0,r.jsx)("input",{id:t,type:void 0===a?"text":a,value:s,onChange:o,placeholder:l,min:c,max:u,step:d,required:h,disabled:_,className:i().input})]})};t.Z=s},4694:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(9915),i=n.n(a),s=function(e){var t=e.id,n=e.label,a=e.checked,s=e.onChange,o=e.disabled,l=e.className,c=function(e){s(e.target.checked)};return(0,r.jsxs)("div",{className:"".concat(i().toggleSwitchContainer," ").concat(void 0===l?"":l),children:[(0,r.jsx)("label",{htmlFor:t,className:i().label,children:n}),(0,r.jsxs)("div",{className:i().switchWrapper,children:[(0,r.jsx)("input",{type:"checkbox",id:t,checked:a,onChange:c,disabled:void 0!==o&&o,className:i().checkbox}),(0,r.jsx)("span",{className:i().slider})]})]})};t.Z=s},1981:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(6042),a=n(9396),i=n(5893);n(7294);var s=n(7841),o=n.n(s),l=function(e){var t=e.size,n=void 0===t?"medium":t,s=e.color,l=e.className,c=e.children,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["size","color","className","children"]),d={small:16,medium:24,large:32}[n];return(0,i.jsx)("svg",(0,a.Z)((0,r.Z)({xmlns:"http://www.w3.org/2000/svg",width:d,height:d,viewBox:"0 0 24 24",fill:"none",stroke:s||"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"".concat(o().icon," ").concat(o()[n]," ").concat(void 0===l?"":l)},u),{children:c}))}},528:function(e,t,n){"use strict";var r=n(6042),a=n(9396),i=n(5893);n(7294);var s=n(1981),o=function(e){return(0,i.jsxs)(s.Z,(0,a.Z)((0,r.Z)({},e),{children:[(0,i.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),(0,i.jsx)("line",{x1:"9",y1:"10",x2:"15",y2:"10"}),(0,i.jsx)("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}))};t.Z=o},6345:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5893),a=n(7294),i=n(5798),s=n.n(i),o=n(7140),l=n.n(o),c=function(e){var t=e.placeholder,n=e.onSearch,i=(0,a.useState)(""),s=i[0],o=i[1],c=function(e){e.preventDefault(),n&&n(s)};return(0,r.jsx)("div",{className:l().searchBarContainer,children:(0,r.jsxs)("form",{onSubmit:c,className:l().searchForm,children:[(0,r.jsx)("input",{type:"text",className:l().searchInput,placeholder:void 0===t?"Search...":t,value:s,onChange:function(e){return o(e.target.value)}}),(0,r.jsx)("button",{type:"submit",className:l().searchButton,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,r.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})})},u=n(1664),d=n.n(u),h=n(3442),_=n.n(h),m=function(e){var t=e.href;return(0,r.jsx)(d(),{href:t,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)("a",{className:_().backButton,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,r.jsx)("polyline",{points:"12 19 5 12 12 5"})]})})})},p=function(e){var t=e.title,n=e.showSearch,a=e.children,i=e.showBackButton,o=e.backHref;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("header",{className:s().header,children:[void 0!==i&&i&&(0,r.jsx)("div",{className:s().backButton,children:(0,r.jsx)(m,{href:void 0===o?"/admin-dashboard":o})}),(0,r.jsx)("div",{className:s().logoContainer,children:(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)("a",{className:s().logoLink,children:(0,r.jsx)("img",{src:"/images/Logo.png",alt:"PPR Logo",className:s().logo,title:void 0===t?"PPR":t})})})})]}),(0,r.jsxs)("div",{className:s().subHeader,children:[a,(void 0===n||n)&&(0,r.jsx)("div",{className:s().searchSection,children:(0,r.jsx)(c,{placeholder:"Search quotes, clients, projects..."})})]})]})}},5212:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(6134),i=n.n(a),s=n(528),o=n(4038),l=n(8081),c=function(e){var t=e.finalPrice,n=e.squareFootage,a=e.onViewFullQuote,c=e.showViewQuoteButton;return(0,r.jsxs)("div",{className:i().quoteTotalContainer,children:[(0,r.jsxs)("div",{className:i().quoteTotal,children:[(0,r.jsx)("span",{children:"FINAL CUSTOMER PRICE:"}),(0,r.jsx)("span",{className:i().totalPrice,children:(0,l.x)(t)})]}),(0,r.jsxs)("div",{className:i().pricePerSqFt,children:[(0,r.jsx)("span",{children:"Price per Square Foot:"}),(0,r.jsxs)("span",{children:[(0,l.x)(n>0?t/n:0),"/sq ft"]})]}),(void 0===c||c)&&a&&(0,r.jsxs)(o.Z,{onClick:a,className:i().buttonMarginTop,children:[(0,r.jsx)(s.Z,{size:"small"}),"VIEW FULL QUOTE"]})]})};t.Z=c},9483:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(7568),a=n(6042),i=n(7582),s=n(5893),o=n(7294),l=n(1163),c=n(9008),u=n.n(c),d=n(6134),h=n.n(d),_=n(7052),m=n(734),p=n(6345),f=n(4924),v=n(9396),g=n(8081),x=n(4038),j=n(3630),b=n(8380),N=n(4694),S=n(5212),w=n(528),y=n(1981),C=function(e){return(0,s.jsxs)(y.Z,(0,v.Z)((0,a.Z)({},e),{children:[(0,s.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,s.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}))},q=function(e){var t,n=e.quote,l=e.isEditable,c=e.onSave,u=(0,o.useState)(!1),d=u[0],_=u[1],m=(0,o.useState)(n),p=m[0],y=m[1],q=(0,o.useState)(!1),F=q[0],H=q[1],k=(0,o.useState)(null),Z=k[0],P=k[1],B=function(){return n.total?n.total:n.finalCustomerPrice?n.finalCustomerPrice:0},I=function(e){return!!n[e]||!!n.inputs&&!!n.inputs[e]&&(!0===n.inputs[e]||"true"===n.inputs[e]||Number(n.inputs[e])>0)},T=function(e,t){y(function(n){return(0,v.Z)((0,a.Z)({},n),(0,f.Z)({},e,t))})},O=function(e,t){var n=""===t?0:parseFloat(t);y(function(t){return(0,v.Z)((0,a.Z)({},t),(0,f.Z)({},e,n))})},L=function(e,t){y(function(n){return(0,v.Z)((0,a.Z)({},n),(0,f.Z)({},e,t))})},W=(t=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(t){switch(t.label){case 0:if(!c)return[2];t.label=1;case 1:return t.trys.push([1,3,4,5]),H(!0),P(null),[4,c(p)];case 2:return t.sent(),_(!1),[3,5];case 3:return e=t.sent(),console.error("Failed to save quote:",e),P("Failed to save quote. Please try again."),[3,5];case 4:return H(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),Q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=arguments.length>3?arguments[3]:void 0,a=p[t];if(!d)return(0,s.jsxs)("div",{className:h().quoteItem,children:[(0,s.jsxs)("span",{children:[e,":"]}),(0,s.jsx)("span",{children:"toggle"===n?a?"Yes":"No":"number"===n&&"number"==typeof a?(0,g.x)(a):String(a||"-")})]});switch(n){case"text":return(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"field-".concat(t),children:[e,":"]}),(0,s.jsx)(j.Z,{id:"field-".concat(t),label:e,value:a||"",onChange:function(e){return T(t,e.target.value)}})]});case"number":return(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"field-".concat(t),children:[e,":"]}),(0,s.jsx)(j.Z,{id:"field-".concat(t),label:e,value:(null==a?void 0:a.toString())||"0",onChange:function(e){return O(t,e.target.value)},type:"number",step:"0.01"})]});case"toggle":return(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"field-".concat(t),children:[e,":"]}),(0,s.jsx)(N.Z,{id:"field-".concat(t),label:e,checked:!!a,onChange:function(e){return L(t,e)}})]});case"select":return(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsxs)("label",{htmlFor:"field-".concat(t),children:[e,":"]}),(0,s.jsx)(b.Z,{id:"field-".concat(t),label:e,value:a||"",onChange:function(e){return T(t,e.target.value)},options:r||[]})]});default:return null}};return(0,s.jsxs)("div",{className:h().quoteDetailsContainer,children:[(0,s.jsxs)("div",{className:h().quoteDetailsHeader,children:[(0,s.jsx)("h3",{children:"Quote Details"}),void 0!==l&&l&&(0,s.jsx)("div",{className:h().actionButtons,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{onClick:W,disabled:F,variant:"primary",children:F?"Saving...":"Save Changes"}),(0,s.jsx)(x.Z,{onClick:function(){_(!1),y(n),P(null)},variant:"secondary",disabled:F,children:"Cancel"})]}):(0,s.jsx)(x.Z,{onClick:function(){return _(!0)},variant:"primary",children:"Edit Quote"})})]}),Z&&(0,s.jsx)("div",{className:h().errorMessage,children:Z}),(0,s.jsx)("div",{className:h().card,children:(0,s.jsxs)("div",{className:h().featureSection,children:[(0,s.jsxs)("div",{className:h().featureHeader,children:[(0,s.jsx)("div",{className:h().featureIcon,children:(0,s.jsx)(w.Z,{})}),(0,s.jsx)("h4",{children:"Project Overview"})]}),(0,s.jsxs)("div",{className:h().featureContent,children:[Q("Quote Title","title"),Q("Service Type","serviceName"),Q("Project Area (sq ft)","squareFootage","number"),Q("Date","date"),Q("Expiry Date","expiryDate"),Q("Status","status","select",[{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"},{value:"expired",label:"Expired"}]),Q("Description","description")]})]})}),(0,s.jsx)("div",{className:h().card,children:(0,s.jsxs)("div",{className:h().featureSection,children:[(0,s.jsxs)("div",{className:h().featureHeader,children:[(0,s.jsx)("div",{className:h().featureIcon,children:(0,s.jsx)(C,{})}),(0,s.jsx)("h4",{children:"Project Features"})]}),(0,s.jsxs)("div",{className:h().featureContent,children:[Q("Wall Addition","isWallAddition","toggle"),(d||I("isWallAddition")||p.isWallAddition)&&Q("Wall Linear Footage","wallLinearFootage","number"),Q("Grass Removal","isGrassRemoval","toggle"),Q("Coping Addition","isCopingAddition","toggle"),(d||I("isCopingAddition")||p.isCopingAddition)&&Q("Coping Linear Footage","copingLinearFootage","number")]})]})}),(0,s.jsx)("div",{className:h().card,children:(0,s.jsxs)("div",{className:h().featureSection,children:[(0,s.jsxs)("div",{className:h().featureHeader,children:[(0,s.jsx)("div",{className:h().featureIcon,children:(0,s.jsx)(w.Z,{})}),(0,s.jsx)("h4",{children:"Pricing Breakdown"})]}),(0,s.jsxs)("div",{className:h().featureContent,children:[Q("Raw Service Cost","rawServiceCost","number"),Q("Paver Cost","paverCost","number"),Q("Material Cost","materialCostDetail","number"),Q("Labor Cost","laborCost","number"),Q("Installation Cost","installCost","number"),Q("Marketing Cost","marketingCost","number"),Q("Profit","profit","number"),Q("Profit Margin","profitMargin","number"),Q("Price Per Sq Ft","pricePerSqFt","number"),(0,s.jsx)("div",{className:h().divider}),(0,s.jsxs)("div",{className:h().quoteItem,children:[(0,s.jsx)("span",{children:"Total Price:"}),(0,s.jsx)("span",{className:h().price,children:(0,g.x)(B())})]})]})]})}),(0,s.jsx)("div",{className:h().card,children:(0,s.jsx)(S.Z,{finalPrice:B(),squareFootage:n.squareFootage?Number(n.squareFootage):n.inputs&&n.inputs.squareFootage?Number(n.inputs.squareFootage):0,showViewQuoteButton:!1})})]})},F=n(3903),H=n(2367);function k(){var e,t=(0,l.useRouter)(),n=(0,H.vR)().fetchQuotes;t.query.id;var c,d=(0,o.useState)(null),f=d[0],v=d[1],g=(0,o.useState)(null),x=g[0],j=g[1],b=(0,o.useState)([]),N=b[0],S=b[1],w=(0,o.useState)(null),y=w[0],C=w[1],k=(0,o.useState)(!1),Z=k[0],P=k[1],B=(0,o.useState)(!1),I=(B[0],B[1]),T=(0,o.useState)(!1),O=T[0],L=T[1],W=(0,o.useState)(null),Q=W[0],D=W[1],E=(0,o.useState)(!1),G=(E[0],E[1]),A=(0,o.useState)(null),R=(A[0],A[1]),M=(0,o.useState)(null),U=M[0],J=M[1];(0,o.useEffect)(function(){var e;(e=(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,et()];case 1:if(e.sent(),!(t.isReady&&t.query.id))return[3,3];return[4,ee()];case 2:e.sent(),e.label=3;case 3:return[2]}})}),function(){return e.apply(this,arguments)})()},[t.isReady,t.query.id]);var V,z,X,Y,K,$,ee=(c=(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:if(!t.query.id)return[2];return[4,en(t.query.id)];case 1:return e.sent(),[2]}})}),function(){return c.apply(this,arguments)}),et=(V=(0,r.Z)(function(){var e,t;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,F.NF.getAll()];case 1:return S(e.sent()||[]),[3,3];case 2:return t=e.sent(),console.error("Failed to fetch clients:",t),[3,3];case 3:return[2]}})}),function(){return V.apply(this,arguments)}),en=(z=(0,r.Z)(function(e){var t,n,r;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,F.Go.getById(e)];case 1:if(!(t=i.sent()))throw Error("Quote not found");if(t.clientId&&C(t.clientId),n=(0,a.Z)({},t),"string"==typeof t.inputs&&t.inputs)try{n.inputs=JSON.parse(t.inputs),n.inputs&&((!0===n.inputs.wall||"true"===n.inputs.wall)&&(n.isWallAddition=!0,n.wallLinearFootage=Number(n.inputs.wallLinearFootage||0)),(!0===n.inputs.grassRemoval||"true"===n.inputs.grassRemoval)&&(n.isGrassRemoval=!0),(!0===n.inputs.coping||"true"===n.inputs.coping)&&(n.isCopingAddition=!0,n.copingLinearFootage=Number(n.inputs.copingLinearFootage||0)),n.inputs.squareFootage&&(n.squareFootage=Number(n.inputs.squareFootage)))}catch(s){console.error("Failed to parse quote inputs:",s)}if("string"==typeof t.calculations&&t.calculations)try{n.calculations=JSON.parse(t.calculations)}catch(o){console.error("Failed to parse quote calculations:",o)}return v(n),[2,n];case 2:return r=i.sent(),console.error("Error fetching quote:",r),j("Failed to load quote. Please try again."),[2,null];case 3:return[2]}})}),function(e){return z.apply(this,arguments)}),er=(X=(0,r.Z)(function(e,t){var r,a,s,o,l;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!(a=t||y)&&!t)return console.log("No client selected, storing quote in session storage"),sessionStorage.setItem("pendingQuote",JSON.stringify(e)),[2,null];return s={title:e.title||e.serviceName||"Quote",description:e.description||"",date:new Date().toISOString().split("T")[0],expiryDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],status:"draft",type:e.serviceName||"Install",total:e.finalCustomerPrice||e.total||0,clientId:a||null,clientName:a&&(null===(r=N.find(function(e){return e.id===a}))||void 0===r?void 0:r.name)||"",inputs:JSON.stringify(e.inputs||{}),calculations:JSON.stringify(e.calculations||{})},[4,F.Go.create(s)];case 1:if(o=i.sent(),console.log("Quote saved to database:",o),o&&o.id)return sessionStorage.removeItem("pendingQuote"),J(o.id),n(),[2,o.id];return[2,null];case 2:return l=i.sent(),console.error("Failed to save quote to database:",l),[2,null];case 3:return[2]}})}),function(e,t){return X.apply(this,arguments)}),ea=function(e){var t=e.target.value;if("add_new"===t){P(!0),C(null);return}C(t||null),t&&U&&ei(t),D(null)},ei=(Y=(0,r.Z)(function(e){var t;return(0,i.__generator)(this,function(r){switch(r.label){case 0:if(!e||!U)return console.error("Cannot attach client: missing client ID or quote ID"),D("Missing client ID or quote ID"),[2];r.label=1;case 1:return r.trys.push([1,4,5,6]),I(!0),D(null),console.log("Attaching client to quote:",{quoteId:U,clientId:e}),[4,es(U,e)];case 2:return r.sent(),[4,ee()];case 3:return r.sent(),n(),L(!0),setTimeout(function(){return L(!1)},3e3),[3,6];case 4:return t=r.sent(),console.error("Failed to attach client:",t),D("Failed to attach client. Please try again."),[3,6];case 5:return I(!1),[7];case 6:return[2]}})}),function(e){return Y.apply(this,arguments)}),es=(K=(0,r.Z)(function(e,t){var n,r,a,s,o,l,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:r=(n=N.find(function(e){return e.id===t}))?n.name:"Unknown Client",a=null,i.label=1;case 1:return i.trys.push([1,3,,4]),s="number"==typeof e?e.toString():e,[4,F.Go.getById(s)];case 2:return a=i.sent(),[3,4];case 3:return o=i.sent(),console.error("Failed to fetch quote details:",o),[3,4];case 4:return l={clientId:t,clientName:r,title:(null==a?void 0:a.title)||(null==f?void 0:f.title)||"Quote",total:(null==a?void 0:a.total)||(null==f?void 0:f.total)||0,date:new Date().toISOString().split("T")[0],expiryDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],status:(null==a?void 0:a.status)||"pending",type:(null==a?void 0:a.type)||(null==f?void 0:f.serviceName)||"Service"},c="number"==typeof e?e.toString():e,[4,F.Go.update(c,l)];case 5:return[2,i.sent()]}})}),function(e,t){return K.apply(this,arguments)}),eo=function(){et(),P(!1)},el=($=(0,r.Z)(function(e){var r,a,s,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,5,6,7]),G(!0),R(null),console.log("Saving updated quote:",e),t.query.id)return[3,2];return[4,er(e)];case 1:if(r=i.sent())t.push("/view-quote?id=".concat(r));else throw Error("Failed to create new quote");return[2];case 2:return a=t.query.id,s={title:e.title||e.serviceName||"Quote",description:e.description||"",total:e.finalCustomerPrice||e.total||0,inputs:JSON.stringify(e.inputs||{}),calculations:JSON.stringify(e.calculations||{})},[4,F.Go.update(a,s)];case 3:return i.sent(),console.log("Quote updated successfully"),[4,ee()];case 4:return i.sent(),n(),[3,7];case 5:return o=i.sent(),console.error("Failed to update quote:",o),R("Failed to save quote changes. Please try again."),[3,7];case 6:return G(!1),[7];case 7:return[2]}})}),function(e){return $.apply(this,arguments)});return(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(u(),{children:(0,s.jsx)("title",{children:"View Quote | PPR Quoting Software"})}),(0,s.jsx)(p.Z,{title:"View Full Quote"}),(0,s.jsx)("main",{className:h().main,children:(0,s.jsx)("div",{className:h().container,children:(0,s.jsxs)("div",{className:h().grid,children:[x&&(0,s.jsxs)("div",{className:"".concat(h().card," ").concat(h().errorCard," ").concat(h().fullWidth),children:[(0,s.jsx)("h3",{children:"Error Loading Quote"}),(0,s.jsx)("p",{children:x})]}),!x&&!f&&(0,s.jsxs)("div",{className:"".concat(h().card," ").concat(h().fullWidth),children:[(0,s.jsx)("h3",{children:"Loading Quote..."}),(0,s.jsxs)("div",{className:h().loadingContainer,children:[(0,s.jsx)("div",{className:h().loadingSpinner}),(0,s.jsx)("p",{children:"Please wait while we load your quote details."})]})]}),f&&(0,s.jsx)("div",{className:"".concat(h().fullWidth),children:(0,s.jsx)(q,{quote:f,isEditable:!0,onSave:el})}),f&&(0,s.jsxs)("div",{className:"".concat(h().card," ").concat(h().fullWidth),children:[(0,s.jsx)("h3",{children:"Client Information"}),y?(0,s.jsx)("div",{className:h().clientInfo,children:(0,s.jsxs)("div",{className:h().quoteItem,children:[(0,s.jsx)("span",{children:"Quote for client:"}),(0,s.jsx)("span",{className:h().price,children:(null===(e=N.find(function(e){return e.id===y}))||void 0===e?void 0:e.name)||"Selected Client"})]})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:h().formGroup,children:[(0,s.jsx)("label",{htmlFor:"client-select",children:"Attach this quote to a client:"}),(0,s.jsx)("div",{className:h().selectWithButton,children:(0,s.jsxs)("select",{id:"client-select",value:y||"",onChange:ea,className:h().clientSelect,children:[(0,s.jsx)("option",{value:"",children:"Select a client..."}),(0,s.jsx)("option",{value:"add_new",className:h().addNewOption,children:"+ Add New Client"}),N.map(function(e){return(0,s.jsx)("option",{value:e.id,children:e.name},e.id)})]})})]}),O&&(0,s.jsx)("div",{className:h().successMessage,children:"Client successfully attached to quote!"}),Q&&(0,s.jsx)("div",{className:h().errorMessage,children:Q})]})]})]})})}),(0,s.jsx)(_.Z,{isOpen:Z,onClose:function(){return P(!1)},onClientAdded:eo})]})}},8081:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var r=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}},3442:function(e){e.exports={backButton:"BackButton_backButton__lrPw1"}},5694:function(e){e.exports={button:"Button_button__vidhW",fullWidth:"Button_fullWidth__ewNSl",primary:"Button_primary___Ovxd",secondary:"Button_secondary__CPz0Q",accent:"Button_accent__5Fd9s",small:"Button_small__5SUDH",medium:"Button_medium__xFkmq",large:"Button_large__saJb8"}},7140:function(e){e.exports={searchBarContainer:"SearchBar_searchBarContainer__JLhh5",searchForm:"SearchBar_searchForm__ssP1v",searchInput:"SearchBar_searchInput__fIzc3",searchButton:"SearchBar_searchButton__m7VDl"}},5208:function(e){e.exports={formGroup:"SelectField_formGroup__5t_Tu",label:"SelectField_label__5IsfY",required:"SelectField_required__FbVkY",select:"SelectField_select__2GUUV"}},194:function(e){e.exports={formGroup:"TextField_formGroup__dl_kT",label:"TextField_label__O7PgL",required:"TextField_required__6_v0x",input:"TextField_input__8YABb"}},9915:function(e){e.exports={toggleSwitchContainer:"ToggleSwitch_toggleSwitchContainer__1hVUT",label:"ToggleSwitch_label__hQS8T",switchWrapper:"ToggleSwitch_switchWrapper__cfkG7",checkbox:"ToggleSwitch_checkbox___pHyp",slider:"ToggleSwitch_slider___tFAM"}},7841:function(e){e.exports={icon:"Icon_icon__NBmaq",small:"Icon_small__YxClB",medium:"Icon_medium__SCaHr",large:"Icon_large__XZCtQ"}},5798:function(e){e.exports={header:"PageHeader_header__gojWM",title:"PageHeader_title___y8_d",logoContainer:"PageHeader_logoContainer__D4hn_",logo:"PageHeader_logo__dMaFB",subHeader:"PageHeader_subHeader__LT60k",searchSection:"PageHeader_searchSection__efZqS",backButton:"PageHeader_backButton__iTUwa",backButtonContainer:"PageHeader_backButtonContainer__5cNxx"}},6134:function(e){e.exports={container:"Home_container__Ennsq",main:"Home_main__EtNt2",footer:"Home_footer__7dKhS",title:"Home_title__FX7xZ",subtitle:"Home_subtitle__xVO9d",grid:"Home_grid__c_g6N",card:"Home_card__7oz7W",formGroup:"Home_formGroup__2XSFL",button:"Home_button__69vwW",quoteItem:"Home_quoteItem___6e8k",sectionHeader:"Home_sectionHeader__fHtmb",price:"Home_price__yNfja",divider:"Home_divider__TlqY0",featureSection:"Home_featureSection__SYTd1",featureHeader:"Home_featureHeader__SzvqX",featureIcon:"Home_featureIcon__3oN_J",featureContent:"Home_featureContent__zN7Bb",quoteTotalContainer:"Home_quoteTotalContainer__Jpi4h",quoteTotal:"Home_quoteTotal__F0VLC",totalPrice:"Home_totalPrice__SRJZm",pricePerSqFt:"Home_pricePerSqFt__2vuE3",buttonMarginTop:"Home_buttonMarginTop__OLnyw",navigation:"Home_navigation__ZnU_e",navContainer:"Home_navContainer__SQ1A6",navLink:"Home_navLink__h63PF",activeTab:"Home_activeTab__Uw3xz",loadingContainer:"Home_loadingContainer__9hOUs",loadingSpinner:"Home_loadingSpinner___p4J4",spin:"Home_spin__6wCPX",fullWidth:"Home_fullWidth__R96nl",selectWithButton:"Home_selectWithButton__wcQEt",clientSelect:"Home_clientSelect__fKmK0",addNewOption:"Home_addNewOption__aKBCr"}}},function(e){e.O(0,[996,69,774,888,179],function(){return e(e.s=3872)}),_N_E=e.O()}]);