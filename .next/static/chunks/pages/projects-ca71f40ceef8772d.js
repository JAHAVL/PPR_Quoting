(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{7670:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return a(5684)}])},7257:function(e,t,a){"use strict";var n=a(5893);a(7294);var r=a(9521),s=a.n(r),c=function(e){var t=e.type,a=e.label,r=e.className,c=a.charAt(0).toUpperCase()+a.slice(1);return(0,n.jsx)("span",{className:"".concat(s().tag," ").concat(s()[t]," ").concat(void 0===r?"":r),children:c})};t.Z=c},1802:function(e,t,a){"use strict";var n=a(5893);a(7294);var r=function(e){var t=e.className;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),(0,n.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})};t.Z=r},734:function(e,t,a){"use strict";var n=a(5893);a(7294);var r=a(9179),s=a.n(r),c=function(e){var t=e.children;return(0,n.jsx)("div",{className:s().pageContainer,children:t})};t.Z=c},6345:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var n=a(5893),r=a(7294),s=a(5798),c=a.n(s),o=a(7140),i=a.n(o),l=function(e){var t=e.placeholder,a=e.onSearch,s=(0,r.useState)(""),c=s[0],o=s[1],l=function(e){e.preventDefault(),a&&a(c)};return(0,n.jsx)("div",{className:i().searchBarContainer,children:(0,n.jsxs)("form",{onSubmit:l,className:i().searchForm,children:[(0,n.jsx)("input",{type:"text",className:i().searchInput,placeholder:void 0===t?"Search...":t,value:c,onChange:function(e){return o(e.target.value)}}),(0,n.jsx)("button",{type:"submit",className:i().searchButton,children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,n.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})})},u=a(1664),d=a.n(u),_=a(3442),h=a.n(_),p=function(e){var t=e.href;return(0,n.jsx)(d(),{href:t,passHref:!0,legacyBehavior:!0,children:(0,n.jsx)("a",{className:h().backButton,children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,n.jsx)("polyline",{points:"12 19 5 12 12 5"})]})})})},g=function(e){var t=e.title,a=e.showSearch,r=e.children,s=e.showBackButton,o=e.backHref;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("header",{className:c().header,children:[void 0!==s&&s&&(0,n.jsx)("div",{className:c().backButton,children:(0,n.jsx)(p,{href:void 0===o?"/admin-dashboard":o})}),(0,n.jsx)("div",{className:c().logoContainer,children:(0,n.jsx)(d(),{href:"/",children:(0,n.jsx)("a",{className:c().logoLink,children:(0,n.jsx)("img",{src:"/images/Logo.png",alt:"PPR Logo",className:c().logo,title:void 0===t?"PPR":t})})})})]}),(0,n.jsxs)("div",{className:c().subHeader,children:[r,(void 0===a||a)&&(0,n.jsx)("div",{className:c().searchSection,children:(0,n.jsx)(l,{placeholder:"Search quotes, clients, projects..."})})]})]})}},2519:function(e,t,a){"use strict";var n=a(9815),r=a(5893),s=a(7294),c=a(5232),o=a.n(c);t.Z=function(e){var t=e.columns,a=e.data,c=e.keyField,i=e.emptyMessage,l=e.onRowClick,u=e.className,d=e.isLoading,_=e.sortable,h=void 0===_||_,p=e.pagination,g=void 0===p||p,f=e.itemsPerPage,m=void 0===f?10:f,j=(0,s.useState)(null),x=j[0],b=j[1],v=(0,s.useState)("asc"),C=v[0],N=v[1],y=(0,s.useState)(1),P=y[0],k=y[1],T=function(e){h&&(x===e?N("asc"===C?"desc":"asc"):(b(e),N("asc")))},w=s.useMemo(function(){return x?(0,n.Z)(a).sort(function(e,t){var a=e[x],n=t[x];return a===n?0:"string"==typeof a&&"string"==typeof n?"asc"===C?a.localeCompare(n):n.localeCompare(a):null==a?"asc"===C?-1:1:null==n?"asc"===C?1:-1:"asc"===C?a<n?-1:1:a<n?1:-1}):a},[a,x,C]),B=Math.ceil(w.length/m),S=g?w.slice((P-1)*m,P*m):w,D=function(e){k(e)};return(0,r.jsx)("div",{className:"".concat(o().tableContainer," ").concat(void 0===u?"":u),children:void 0!==d&&d?(0,r.jsx)("div",{className:o().loading,children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:o().tableWrapper,children:(0,r.jsxs)("table",{className:o().table,children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:t.map(function(e,t){return(0,r.jsx)("th",{className:"".concat(o().tableHeader," ").concat(e.className||""," ").concat(h?o().sortable:""),onClick:function(){return"string"==typeof e.accessor&&T(e.accessor)},children:(0,r.jsxs)("div",{className:o().headerContent,children:[e.header,h&&"string"==typeof e.accessor&&x===e.accessor&&(0,r.jsx)("span",{className:"asc"===C?o().sortAsc:o().sortDesc,children:"asc"===C?"▲":"▼"})]})},t)})})}),(0,r.jsx)("tbody",{children:S.length>0?S.map(function(e){return(0,r.jsx)("tr",{onClick:function(){return l&&l(e)},className:l?o().clickableRow:"",children:t.map(function(t,a){var n,s;return(0,r.jsx)("td",{className:t.className||"",children:"function"==typeof t.accessor?t.accessor(e):e[t.accessor]},a)})},String(e[c]))}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t.length,className:o().emptyMessage,children:void 0===i?"No data available":i})})})]})}),g&&B>1&&(0,r.jsxs)("div",{className:o().pagination,children:[(0,r.jsx)("button",{className:o().pageButton,disabled:1===P,onClick:function(){return D(P-1)},children:"<"}),Array.from({length:B},function(e,t){return t+1}).map(function(e){return(0,r.jsx)("button",{className:"".concat(o().pageButton," ").concat(P===e?o().activePage:""),onClick:function(){return D(e)},children:e},e)}),(0,r.jsx)("button",{className:o().pageButton,disabled:P===B,onClick:function(){return D(P+1)},children:">"})]})]})})}},5684:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a(7568),r=a(7582),s=a(5893),c=a(7294),o=a(9008),i=a.n(o),l=a(1163),u=a(8233),d=a.n(u),_=a(734),h=a(6345),p=a(2519),g=a(2777),f=a.n(g),m=a(6794),j=a(7257),x=function(e){var t=e.status,a=t.charAt(0).toUpperCase()+t.slice(1);return(0,s.jsx)(j.Z,{type:t.toLowerCase(),label:a,className:f().statusBadge})},b=function(e){var t=e.type,a=t.charAt(0).toUpperCase()+t.slice(1);return(0,s.jsx)(j.Z,{type:t.toLowerCase(),label:a,className:f().typeBadge})},v=function(e){var t=e.projects,a=e.isLoading,n=(0,l.useRouter)(),r=[{header:"Client",accessor:"clientName"},{header:"Type",accessor:function(e){return(0,s.jsx)(b,{type:e.type})},className:f().centerAlign},{header:"Status",accessor:function(e){return(0,s.jsx)(x,{status:e.status})},className:f().centerAlign},{header:"Total",accessor:function(e){return(0,m.x)(e.total)},className:f().rightAlign}],c=function(e){n.push("/projects/".concat(e.id))};return(0,s.jsx)(p.Z,{columns:r,data:t,keyField:"id",onRowClick:c,isLoading:void 0!==a&&a,emptyMessage:"No projects found",className:f().projectsTable})},C=a(1802),N=a(3903),y=function(){var e=(0,l.useRouter)(),t=(0,c.useState)([]),a=t[0],o=t[1],u=(0,c.useState)(!0),p=u[0],g=u[1],f=(0,c.useState)(null),m=f[0],j=f[1],x=(0,c.useState)(""),b=x[0];x[1];var y=(0,c.useState)(!1),P=y[0];y[1],(0,c.useEffect)(function(){var e;(e=(0,n.Z)(function(){var e,t,a;return(0,r.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),g(!0),[4,N.hi.projects.getAll()];case 1:return o(e.sent().map(function(e){return{id:e.id,clientName:e.clientName,address:e.address||"",startDate:e.startDate,endDate:e.endDate,total:e.total,status:e.status,type:e.type,squareFootage:e.squareFootage||0}})),j(null),[3,4];case 2:return a=e.sent(),console.error("Failed to fetch projects:",a),j("Failed to load projects. Please try again."),[3,4];case 3:return g(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[]);var k=a.filter(function(e){var t=b.toLowerCase();return e.clientName.toLowerCase().includes(t)||e.address.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)}),T=function(){e.push("/create-project")};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"PPR - Projects"}),(0,s.jsx)("meta",{name:"description",content:"Paver Pressure and Repair Projects"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(h.Z,{title:"PPR",showBackButton:!0,backHref:"/admin-dashboard"}),(0,s.jsxs)("main",{className:d().main,children:[(0,s.jsx)("div",{className:d().pageHeader,children:(0,s.jsxs)("div",{className:d().titleContainer,children:[(0,s.jsx)(C.Z,{className:d().pageIcon}),(0,s.jsx)("h1",{className:d().pageTitle,children:"Projects"}),(0,s.jsx)("button",{className:d().createButton,onClick:T,"aria-label":"Create new project",children:"+"})]})}),p?(0,s.jsx)("div",{className:d().loadingContainer,children:(0,s.jsx)("p",{children:"Loading projects..."})}):m?(0,s.jsxs)("div",{className:d().errorContainer,children:[(0,s.jsx)("p",{children:m}),(0,s.jsx)("button",{onClick:function(){return window.location.reload()},children:"Try Again"})]}):(0,s.jsx)("div",{className:d().tableContainer,children:(0,s.jsx)(v,{projects:k,isLoading:P})})]})]})]})}},6794:function(e,t,a){"use strict";a.d(t,{p:function(){return r},x:function(){return n}});var n=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e)},r=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},9521:function(e){e.exports={tag:"Tag_tag__5LV1t",install:"Tag_install__jOf2D",clean:"Tag_clean__nzR0m",seal:"Tag_seal__GpnPm",repair:"Tag_repair__Y_yAr",approved:"Tag_approved__qSupX",pending:"Tag_pending__v59b8",completed:"Tag_completed__aYC5U",rejected:"Tag_rejected__grynf",default:"Tag_default__rWEz5"}},3442:function(e){e.exports={backButton:"BackButton_backButton__lrPw1"}},7140:function(e){e.exports={searchBarContainer:"SearchBar_searchBarContainer__JLhh5",searchForm:"SearchBar_searchForm__ssP1v",searchInput:"SearchBar_searchInput__fIzc3",searchButton:"SearchBar_searchButton__m7VDl"}},9179:function(e){e.exports={pageContainer:"PageContainer_pageContainer__ntg2Q"}},5798:function(e){e.exports={header:"PageHeader_header__gojWM",title:"PageHeader_title___y8_d",logoContainer:"PageHeader_logoContainer__D4hn_",logo:"PageHeader_logo__dMaFB",subHeader:"PageHeader_subHeader__LT60k",searchSection:"PageHeader_searchSection__efZqS",backButton:"PageHeader_backButton__iTUwa",backButtonContainer:"PageHeader_backButtonContainer__5cNxx"}},5232:function(e){e.exports={tableContainer:"DataTable_tableContainer__G9n3a",tableWrapper:"DataTable_tableWrapper__G_oJk",table:"DataTable_table__Gt_63",tableHeader:"DataTable_tableHeader__BvfuQ",headerContent:"DataTable_headerContent__UYWqg",sortable:"DataTable_sortable__OW9dJ",sortAsc:"DataTable_sortAsc__ECBFf",sortDesc:"DataTable_sortDesc__N9hQF",clickableRow:"DataTable_clickableRow__CHypJ",emptyMessage:"DataTable_emptyMessage__GLjh4",loading:"DataTable_loading__gcydQ",pagination:"DataTable_pagination__lUPNv",pageButton:"DataTable_pageButton__3lzCp",activePage:"DataTable_activePage__VDLBU",statusPending:"DataTable_statusPending__59nQr",statusApproved:"DataTable_statusApproved__CfJek",statusRejected:"DataTable_statusRejected__UCaJI",statusCompleted:"DataTable_statusCompleted__hTXzh"}},2777:function(e){e.exports={projectsTable:"ProjectsTable_projectsTable__zGdEH",centerAlign:"ProjectsTable_centerAlign__5xcKN",rightAlign:"ProjectsTable_rightAlign__X1f2K",statusBadge:"ProjectsTable_statusBadge__otDCi",typeBadge:"ProjectsTable_typeBadge__1EOK8"}},8233:function(e){e.exports={main:"Projects_main__Yp42L",pageHeader:"Projects_pageHeader__8tpyz",titleContainer:"Projects_titleContainer__JN7U2",pageIcon:"Projects_pageIcon___kWdS",pageTitle:"Projects_pageTitle__fzbRK",createButton:"Projects_createButton__VJm7S",tableContainer:"Projects_tableContainer__PP1x3",searchContainer:"Projects_searchContainer__87JTQ",searchInput:"Projects_searchInput__s7L9r",tableSection:"Projects_tableSection___62J7"}},1163:function(e,t,a){e.exports=a(387)},943:function(e,t,a){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,{Z:function(){return n}})},3375:function(e,t,a){"use strict";function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a.d(t,{Z:function(){return n}})},9815:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var n=a(943),r=a(3375),s=a(1566);function c(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,r.Z)(e)||(0,s.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1566:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var n=a(943);function r(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return(0,n.Z)(e,t)}}}},function(e){e.O(0,[996,774,888,179],function(){return e(e.s=7670)}),_N_E=e.O()}]);