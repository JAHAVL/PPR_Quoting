(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{4091:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients/[id]",function(){return n(5726)}])},3989:function(e,t,n){"use strict";var i=n(5893),a=n(7294),o=n(1150),s=n.n(o),r=function(e){var t=e.isOpen,n=e.onClose,o=e.title,r=e.children,l=e.size,c=void 0===l?"medium":l,d=e.footer,u=(0,a.useRef)(null);return((0,a.useEffect)(function(){var e=function(e){u.current&&!u.current.contains(e.target)&&n()};return t&&(document.addEventListener("mousedown",e),document.body.style.overflow="hidden"),function(){document.removeEventListener("mousedown",e),document.body.style.overflow="auto"}},[t,n]),(0,a.useEffect)(function(){var e=function(e){"Escape"===e.key&&n()};return t&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,n]),t)?(0,i.jsx)("div",{className:s().modalOverlay,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)"},children:(0,i.jsxs)("div",{className:"".concat(s().modalContainer," ").concat(s()[c]),style:{backgroundColor:"rgba(18, 24, 38, 0.7)",backgroundImage:"linear-gradient(to bottom right, rgba(30, 115, 190, 0.15), rgba(18, 24, 38, 0.7))",borderRadius:"var(--radius-md)",boxShadow:"var(--shadow-lg)",border:"1px solid rgba(30, 115, 190, 0.3)",maxHeight:"90vh",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",width:"small"===c?"320px":"medium"===c?"450px":"650px",maxWidth:"90vw",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},ref:u,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,i.jsxs)("div",{className:s().modalHeader,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid rgba(30, 115, 190, 0.3)",background:"linear-gradient(to right, rgba(30, 115, 190, 0.2), transparent)"},children:[(0,i.jsx)("h2",{id:"modal-title",className:s().modalTitle,style:{margin:0,fontSize:"var(--font-lg)",fontWeight:600,color:"white",fontFamily:"var(--font-primary)"},children:o}),(0,i.jsx)("button",{className:s().closeButton,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"rgba(255, 255, 255, 0.7)",padding:0,display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",transition:"all 0.2s ease"},onClick:n,"aria-label":"Close modal",children:"\xd7"})]}),(0,i.jsx)("div",{className:s().modalContent,style:{padding:"20px",overflowY:"auto",flex:1,color:"rgba(255, 255, 255, 0.9)"},children:r}),d&&(0,i.jsx)("div",{className:s().modalFooter,style:{padding:"16px 20px",borderTop:"1px solid rgba(30, 115, 190, 0.3)",display:"flex",justifyContent:"flex-end",gap:"12px",background:"linear-gradient(to right, transparent, rgba(30, 115, 190, 0.2))"},children:d})]})}):null};t.Z=r},734:function(e,t,n){"use strict";var i=n(5893);n(7294);var a=n(9179),o=n.n(a),s=function(e){var t=e.children;return(0,i.jsx)("div",{className:o().pageContainer,children:t})};t.Z=s},5726:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var i=n(7568),a=n(6042),o=n(9396),s=n(2222),r=n(7582),l=n(5893),c=n(7294),d=n(9008),u=n.n(d),h=n(1163),m=n(734),p=n(6345),v=n(7257),_=n(9891),f=n.n(_),g=n(6794),x=n(6759),y=n(9025),j=n(2390),C=n(8223),b=n.n(C),w=function(e){var t=e.onClick,n=e.className;return(0,l.jsx)("button",{className:"".concat(b().actionButton," ").concat(void 0===n?"":n),onClick:function(e){e.stopPropagation(),t()},"aria-label":"Edit client",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:(0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})},N=n(4913),P=n.n(N),B=function(e){var t=e.onClick,n=e.className;return(0,l.jsx)("button",{className:"".concat(P().actionButton," ").concat(void 0===n?"":n),onClick:function(e){e.stopPropagation(),t()},"aria-label":"Add new item",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:(0,l.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})},D=n(9815),k=n(7192),M=n.n(k),S=n(4924),I=n(9092),T=n(3114),E=n(3903),A=n(8773),F=n(7869),Z=n.n(F),L=function(e){var t=e.isOpen,n=e.onClose,i=e.onEdit,a=e.onDelete,o=e.showEdit,s=e.showDelete,r=e.containerRef,d=(0,c.useRef)(null),u=(0,c.useState)(!1),h=u[0],m=u[1];return((0,c.useEffect)(function(){t&&m(!0);var e=function(e){t&&d.current&&!d.current.contains(e.target)&&r.current&&!r.current.contains(e.target)&&n()};return t&&document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[t,n,r]),h)?(0,l.jsxs)(l.Fragment,{children:[t&&r.current&&r.current.classList.add(Z().longPressing),!t&&r.current&&r.current.classList.remove(Z().longPressing),(0,l.jsx)(I.E.div,{ref:d,className:"".concat(Z().actionOverlay," ").concat(t?"":Z().hidden),initial:{opacity:0},animate:{opacity:t?1:0},transition:{duration:.2},children:(0,l.jsxs)("div",{className:Z().actionButtons,children:[(void 0===o||o)&&(0,l.jsx)(I.E.button,{className:Z().editButton,onClick:i,initial:{scale:.8},animate:{scale:1},transition:{duration:.2},children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,l.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(void 0===s||s)&&(0,l.jsx)(I.E.button,{className:Z().deleteButton,onClick:a,initial:{scale:.8},animate:{scale:1},transition:{duration:.2},children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M3 6h18"}),(0,l.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,l.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,l.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,l.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]})})]}):null},z=function(){var e=(0,c.useState)(!1),t=e[0],n=e[1],i=(0,c.useRef)(null),a=(0,c.useRef)(null),o=(0,c.useCallback)(function(){n(!0)},[]),s=(0,c.useCallback)(function(e){e.preventDefault(),a.current&&clearTimeout(a.current),a.current=setTimeout(function(){o()},500)},[o]),r=(0,c.useCallback)(function(){a.current&&(clearTimeout(a.current),a.current=null)},[]),l=(0,c.useCallback)(function(){n(!1)},[]);return{isMenuOpen:t,closeMenu:l,containerRef:i,containerProps:{ref:i,onMouseDown:s,onMouseUp:r,onMouseLeave:r,onTouchStart:s,onTouchEnd:r}}},R=function(e){var t,n=e.id,i=e.content,s=e.timestamp,r=e.eventType,d=e.details,u=e.quoteId,h=e.projectId,m=e.onDelete,p=new Date(s),v=new Date,_=p.getDate()===v.getDate()&&p.getMonth()===v.getMonth()&&p.getFullYear()===v.getFullYear()?p.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),f=p.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),g=(0,c.useState)(!1),x=g[0],y=g[1],j=(0,c.useState)([]),C=j[0],b=j[1],w=(0,c.useState)(null),N=w[0],P=w[1],B=(0,c.useState)(""),k=B[0],F=B[1],Z=(0,c.useState)(!1),z=Z[0],R=Z[1],q=(0,c.useState)(""),H=q[0],O=q[1],V=(0,c.useState)(!1),W=V[0],U=V[1],G=(0,c.useState)(null),Q=G[0],J=G[1],K=(0,c.useState)(!1),Y=K[0],X=K[1],$=(0,c.useState)(!1),ee=$[0],et=$[1],en=(0,c.useRef)(null),ei=(0,c.useState)({}),ea=ei[0],eo=ei[1],es=(0,c.useState)({}),er=es[0],el=es[1],ec=(0,c.useRef)({}),ed=(0,c.useRef)({}),eu=(0,c.useState)(null),eh=(eu[0],eu[1]),em={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},ep=(0,c.useState)(!1),ev=ep[0],e_=ep[1],ef=function(e){ee||ev||(en.current=setTimeout(function(){X(!0),et(!0)},800))},eg=function(){en.current&&(clearTimeout(en.current),en.current=null)},ex=function(){en.current&&(clearTimeout(en.current),en.current=null)},ey=function(e){e.stopPropagation(),m?(m(n),console.log("Deleting message with id: ".concat(n))):(console.log("No delete handler provided for message id: ".concat(n)),alert("Message with ID ".concat(n," would be deleted here (but no delete handler was provided)."))),X(!1),et(!1)},ej=function(){ee||y(!x)},eC=function(e){e.target===e.currentTarget&&(e.stopPropagation(),X(!1),et(!1))};switch(r){case"quote_accepted":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})});break;case"quote_created":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})});break;case"project_status":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"})});break;case"call":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})});break;case"email":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})});break;case"note":t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})});break;default:t=(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})}(0,c.useEffect)(function(){x&&(U(!0),J(null),console.log("Loading notes for activity ID:",n),E.oJ.getByActivityId(n).then(function(e){console.log("Received comments from API:",e);var t=e.map(function(e){return{id:e.id,text:e.content,timestamp:new Date(e.timestamp).toLocaleString(),sender:"system"===e.userId?"System":"You"}});console.log("Formatted notes:",t),b(t),U(!1)}).catch(function(e){console.error("Error loading activity comments:",e),J("Failed to load comments"),U(!1)}))},[x,n]),(0,c.useEffect)(function(){if(ee){var e=function(e){var t=e.target,n=document.querySelector(".".concat(M().deleteButton)),i=document.querySelector(".".concat(M().deleteOverlay));(null==n||!n.contains(t))&&i!==t&&(X(!1),et(!1))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}},[ee]),(0,c.useEffect)(function(){var e=Object.keys(er).filter(function(e){return er[e]});if(e.length>0){e_(!0);var t=function(t){var n=t.target;e.forEach(function(e){var t=ed.current[e];!(t&&t.contains(n))&&(eo(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}),el(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}))}),e.every(function(e){var t=ed.current[e];return!t||!t.contains(n)})&&e_(!1)};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}},[er]);var eb=function(e){O(e.target.value)},ew=function(e){F(e.target.value)},eN=function(e,t){P(e),F(t)},eP=function(){if(N&&k.trim()){var e=C.find(function(e){return e.id===N});if(e){var t=(0,o.Z)((0,a.Z)({},e),{text:k.trim()});E.oJ.update(N,t).then(function(){console.log("Note updated successfully"),b(function(e){return e.map(function(e){return e.id===N?t:e})}),P(null),F("")}).catch(function(e){console.error("Failed to update note:",e),J("Failed to update note. Please try again."),setTimeout(function(){return J(null)},3e3)})}}},eB=function(){P(null),F("")},eD=function(e){console.log("Attempting to delete note with ID: ".concat(e)),E.oJ.delete(e).then(function(){console.log("Note deleted successfully from API"),b(function(t){return t.filter(function(t){return t.id!==e})}),eh(null),el(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}),eo(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}),e_(!1)}).catch(function(t){console.error("Failed to delete note from API:",t),eh(null),el(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}),eo(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e,!1))}),e_(!1),J("Failed to delete note. Please try again."),setTimeout(function(){return J(null)},3e3)})},ek=function(){if(H.trim()){var e={id:(0,A.Z)(),activityId:n,content:H.trim(),timestamp:new Date().toISOString(),userId:"you"};console.log("Adding note to activity:",n),console.log("Note content:",e),E.oJ.create(e).then(function(){console.log("Note saved successfully to API"),b(function(t){return(0,D.Z)(t).concat([{id:e.id,text:e.content,timestamp:new Date(e.timestamp).toLocaleString(),sender:"You"}])}),O(""),R(!1)}).catch(function(e){console.error("Failed to save note:",e),J("Failed to save note. Please try again."),setTimeout(function(){return J(null)},3e3)})}},eM=function(e){"Enter"===e.key&&H.trim()?(e.preventDefault(),ek()):"Escape"===e.key&&(R(!1),O(""))},eS=function(e){e.stopPropagation();var t=u||h;if(!t&&d){var n=d.match(/Quote #([\w-]+)/i),i=d.match(/Project #([\w-]+)/i);n&&r.includes("quote")?t=n[1]:i&&"project_status"===r&&(t=i[1])}t?r.includes("quote")?(console.log("Navigating to quote: ".concat(t)),alert("Navigating to quote: ".concat(t))):"project_status"===r&&(console.log("Navigating to project: ".concat(t)),alert("Navigating to project: ".concat(t))):console.log("No target ID found for navigation")};return(0,l.jsxs)("div",{className:"".concat(M().specialEventContainer," ").concat(x?M().expanded:""," ").concat(Y?M().longPressing:""),onClick:ej,onMouseDown:ef,onMouseUp:eg,onMouseLeave:ex,onTouchStart:ef,onTouchEnd:eg,children:[ee&&(0,l.jsx)(I.E.div,{className:M().deleteOverlay,initial:"hidden",animate:"visible",variants:em,onClick:eC,children:(0,l.jsx)(I.E.button,{className:M().deleteButton,onClick:ey,initial:"hidden",animate:"visible",variants:{hidden:{opacity:0,scale:.5},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:400,damping:17}}},children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M3 6h18"}),(0,l.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,l.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,l.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,l.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})}),(0,l.jsxs)("div",{className:M().specialEventTitle,children:[(0,l.jsxs)("div",{className:M().titleContent,children:[(0,l.jsx)("div",{className:M().activityIcon,children:t}),(0,l.jsx)("div",{className:M().eventTitleText,children:i})]}),(0,l.jsx)(T.M,{children:!x&&(0,l.jsx)(I.E.div,{className:M().activityDate,initial:{opacity:1},exit:em.exit,children:_})}),(0,l.jsx)(T.M,{children:x&&(0,l.jsxs)("div",{className:M().buttonContainer,children:[["quote_accepted","quote_created","quote_rejected","project_status"].includes(r)&&(0,l.jsx)(I.E.button,{className:M().viewButton,onClick:eS,initial:em.hidden,animate:em.visible,exit:em.exit,title:"View ".concat(r.includes("quote")?"Quote":"Project"),children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,l.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})}),(0,l.jsx)(I.E.button,{className:M().addNoteButton,onClick:function(e){e.stopPropagation(),R(function(e){return!e})},initial:em.hidden,animate:em.visible,exit:em.exit,title:"Add a note",children:"+"})]})})]}),x&&(0,l.jsxs)("div",{className:M().expandedContent,onClick:function(e){return e.stopPropagation()},children:[(0,l.jsx)("div",{className:M().specialEventContent,children:d||i}),(0,l.jsx)("div",{className:M().specialEventMeta,children:f}),W&&(0,l.jsx)("div",{className:M().loadingNotes,children:"Loading notes..."}),Q&&(0,l.jsx)("div",{className:M().errorMessage,children:Q}),C.length>0&&(0,l.jsx)("ul",{className:M().noteList,children:C.map(function(e){var t=N===e.id;ea[e.id];var n=er[e.id]||!1,i=function(t){t.stopPropagation(),e_(!0),er[e.id]||(ec.current[e.id]=setTimeout(function(){eo(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e.id,!0))}),el(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e.id,!0))}),eh(e.id)},800))},s=function(t){t.stopPropagation(),er[e.id]||e_(!1),ec.current[e.id]&&(clearTimeout(ec.current[e.id]),ec.current[e.id]=null)},r=function(){eo(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e.id,!1))}),el(function(t){return(0,o.Z)((0,a.Z)({},t),(0,S.Z)({},e.id,!1))}),eh(null),e_(!1)},c=function(t){t.stopPropagation(),er[e.id]||e_(!1),ec.current[e.id]&&(clearTimeout(ec.current[e.id]),ec.current[e.id]=null)};return(0,l.jsxs)("li",{ref:function(t){return ed.current[e.id]=t},className:"".concat(t?M().editingNote:""," ").concat(n?M().longPressing:""),onTouchStart:i,onTouchEnd:c,onMouseDown:i,onMouseUp:c,onMouseLeave:s,children:[(0,l.jsx)("div",{className:M().noteSender,children:e.sender}),t?(0,l.jsxs)("div",{className:M().editNoteContainer,children:[(0,l.jsx)("textarea",{className:M().editNoteTextarea,value:k,onChange:ew,autoFocus:!0}),(0,l.jsxs)("div",{className:M().editNoteButtons,children:[(0,l.jsx)("button",{onClick:eP,className:M().saveButton,children:"Save"}),(0,l.jsx)("button",{onClick:eB,className:M().cancelButton,children:"Cancel"})]})]}):(0,l.jsx)("div",{className:M().noteContent,children:e.text}),(0,l.jsx)("div",{className:M().noteTimestamp,children:e.timestamp}),(0,l.jsx)(L,{isOpen:n,onClose:r,onEdit:function(){r(),eN(e.id,e.text)},onDelete:function(){console.log("Deleting note with ID: ".concat(e.id)),eD(e.id)},containerRef:ed.current[e.id]?{current:ed.current[e.id]}:{current:null}})]},e.id)})}),(0,l.jsx)(T.M,{children:z&&(0,l.jsx)(I.E.div,{className:M().bubbleNoteInput,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:-10,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:20}},exit:{opacity:0,y:-5,scale:.95,transition:{duration:.2}}},children:(0,l.jsx)("input",{type:"text",className:M().noteInput,placeholder:"Add a note about this...",value:H,onChange:eb,onKeyPress:eM,autoFocus:!0})})})]})]})},q=function(e){var t,n=e.id,i=e.content,s=e.timestamp,r=e.type,d=(e.eventType,e.onDelete),u=e.onEdit,h=(0,c.useState)(!1),m=h[0],p=h[1],v=(0,c.useState)(i),_=v[0],f=v[1],x=(0,c.useState)(!1);x[0],x[1];var y=(0,c.useState)(!1);y[0],y[1];var j=(0,c.useRef)(null),C=z(),b=C.isMenuOpen,w=C.closeMenu,N=C.containerRef,P=C.containerProps,B=function(){p(!0),w(),setTimeout(function(){j.current&&j.current.focus()},100)},D=function(){d&&d(n),w()},k=function(){u&&u(n,_),p(!1)},S=function(){f(i),p(!1)},I=function(e){"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&S():(e.preventDefault(),k())};t="other"===r?(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"})}):(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,l.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})});var T=i;if("other"===r){var E=i.match(/^Message from ([^:]+):\s*(.*)$/i);if(E){var A=E[1],F=E[2];T="".concat(A,": ").concat(F)}}return(0,l.jsxs)("div",(0,o.Z)((0,a.Z)({},P),{ref:function(e){e&&(N.current=e)},className:"".concat(M().activityItem," ").concat("user"===r?M().userMessage:M().otherMessage),children:[(0,l.jsx)("div",{className:M().activityIcon,children:t}),m?(0,l.jsxs)("div",{className:M().editContainer,children:[(0,l.jsx)("textarea",{ref:j,className:M().editInput,value:_,onChange:function(e){return f(e.target.value)},onKeyDown:I,rows:3}),(0,l.jsxs)("div",{className:M().editActions,children:[(0,l.jsx)("button",{className:M().saveButton,onClick:k,children:"Save"}),(0,l.jsx)("button",{className:M().cancelButton,onClick:S,children:"Cancel"})]})]}):(0,l.jsxs)("div",{className:M().activityContent,children:[(0,l.jsx)("div",{className:M().activityTitle,children:T}),(0,l.jsx)("div",{className:M().activityDate,children:(0,g.p)(s)})]}),!m&&(0,l.jsx)(L,{isOpen:b,onClose:w,onEdit:B,onDelete:D,containerRef:N})]}))},H=function(e){var t=e.icon,n=e.onClick,i=e.ariaLabel,a=e.className;return(0,l.jsx)("button",{className:"".concat(P().actionButton," ").concat(void 0===a?"":a),onClick:n,"aria-label":i,children:t})},O=n(9283),V=function(e){var t=e.clientId,n=e.className,i=(0,c.useRef)(null),s=(0,c.useRef)(null),r=(0,c.useState)(""),d=r[0],u=r[1],h=(0,c.useState)([]),m=h[0],p=h[1],v=(0,c.useState)(!0),_=(v[0],v[1]),f=(0,c.useState)(null),g=(f[0],f[1]);(0,c.useEffect)(function(){_(!0),g(null),E.tW.getByClientId(t).then(function(e){var t,n=(0,D.Z)(e).sort(function(e,t){var n=new Date(e.timestamp),i=new Date(t.timestamp);return n.getTime()-i.getTime()});p(n),_(!1)}).catch(function(e){console.error("Error fetching activities:",e),g("Failed to load activity data"),_(!1),p([{id:"1",clientId:t,type:"system",content:"Quote Accepted",timestamp:"2023-10-15T15:30:00",eventType:"quote_accepted",details:"Quote #1234 was accepted by the client"},{id:"2",clientId:t,type:"system",content:"Quote Created",timestamp:"2023-10-14T10:15:00",eventType:"quote_created",details:"Quote #1234 was created and sent to client"},{id:"3",clientId:t,type:"system",content:"Project Status Changed",timestamp:"2023-10-13T09:30:00",eventType:"project_status",details:'Project status changed from "Planning" to "In Progress"'},{id:"4",clientId:t,type:"system",content:"Client Call",timestamp:"2023-10-12T14:45:00",eventType:"call",details:"Call initiated to discuss project scope"},{id:"5",clientId:t,type:"system",content:"Email Sent",timestamp:"2023-10-11T11:20:00",eventType:"email",details:"Follow-up email sent regarding project timeline"},{id:"6",clientId:t,type:"user",content:"Client requested additional features for the project. Need to adjust timeline and budget.",timestamp:"2023-10-10T16:30:00",eventType:"note"},{id:"7",clientId:t,type:"other",content:"Team discussed project challenges and solutions.",timestamp:"2023-10-09T13:25:00",eventType:"note"},])})},[t]),(0,c.useEffect)(function(){s.current&&s.current.scrollTo({top:s.current.scrollHeight,behavior:"smooth"})},[m]),(0,c.useEffect)(function(){var e=O.EU.subscribe(t,function(e){p(function(t){return(0,D.Z)(t).concat([e])})});return function(){e()}},[t]);var x=function(){if(d.trim()){var e={id:(0,A.Z)(),clientId:t,type:"user",content:d,timestamp:new Date().toISOString(),eventType:"note"};O.EU.publish(t,e),u("")}},y=function(e){"Enter"===e.key&&(e.preventDefault(),x())},j=function(e){E.tW.delete(e).then(function(){p(function(t){return t.filter(function(t){return t.id!==e})})}).catch(function(e){console.error("Failed to delete message from database:",e),g("Failed to delete message. Please try again."),setTimeout(function(){return g(null)},3e3)})},C=function(e,t){var n=m.find(function(t){return t.id===e});if(!n){console.error("Message with id ".concat(e," not found")),g("Failed to edit message. Message not found."),setTimeout(function(){return g(null)},3e3);return}var i=(0,o.Z)((0,a.Z)({},n),{content:t});E.tW.update(e,i).then(function(){p(function(t){return t.map(function(t){return t.id===e?i:t})})}).catch(function(e){console.error("Failed to update message in database:",e),g("Failed to edit message. Please try again."),setTimeout(function(){return g(null)},3e3)})};return(0,l.jsxs)("div",{className:"".concat(M().activityContainer," ").concat(void 0===n?"":n),children:[(0,l.jsxs)("div",{className:M().chatMessages,ref:s,children:[m.map(function(e){return"system"===e.type?(0,l.jsx)(R,{id:e.id,content:e.content,timestamp:e.timestamp,eventType:e.eventType||"note",details:e.details,onDelete:j},e.id):(0,l.jsx)(q,{id:e.id,content:e.content,timestamp:e.timestamp,type:e.type,eventType:e.eventType,onDelete:j,onEdit:C},e.id)}),(0,l.jsx)("div",{ref:i})]}),(0,l.jsxs)("div",{className:M().chatFooter,children:[(0,l.jsx)("input",{type:"text",className:M().chatInput,placeholder:"Add a note...",value:d,onChange:function(e){return u(e.target.value)},onKeyPress:y}),(0,l.jsx)(H,{icon:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:(0,l.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),onClick:x,ariaLabel:"Send message"})]})]})},W=n(4353),U=n.n(W),G=n(5152),Q=n.n(G)()(function(){return Promise.all([n.e(269),n.e(575)]).then(n.bind(n,575))},{loadableGenerated:{webpack:function(){return[575]}},ssr:!1,loading:function(){return(0,l.jsx)("div",{className:U().loadingMap,children:"Loading map..."})}}),J=function(e){var t=e.address;return(0,l.jsx)("div",{className:U().mapContainer,children:(0,l.jsx)(Q,{address:t})})},K=n(2670),Y=n(3989),X=n(6416),$=n.n(X),ee=function(e){var t,n=e.isOpen,s=e.onClose,d=e.onClientUpdated,u=e.clientId,h=(0,c.useState)({name:"",email:"",phone:"",street:"",city:"",state:"",zipCode:"",status:"prospect"}),m=h[0],p=h[1],v=(0,c.useState)(!1),_=v[0],f=v[1],g=(0,c.useState)(""),x=g[0],y=g[1],j=(0,c.useState)(!1),C=j[0],b=j[1];(0,c.useEffect)(function(){n&&u&&N()},[n,u]);var w,N=(t=(0,i.Z)(function(){var e,t,n;return(0,r.__generator)(this,function(i){switch(i.label){case 0:b(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,(0,E.mz)(u)];case 2:return t=P((e=i.sent()).address||""),p({name:e.name||"",email:e.email||"",phone:e.phone||"",street:t.street,city:t.city,state:t.state,zipCode:t.zipCode,status:e.status||"prospect"}),[3,5];case 3:return n=i.sent(),y("Failed to load client data"),console.error("Error fetching client:",n),[3,5];case 4:return b(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),P=function(e){var t={street:"",city:"",state:"",zipCode:""};if(!e)return t;if((e.match(/,/g)||[]).length>=2){var n=e.split(",").map(function(e){return e.trim()});if(t.street=n[0]||"",n.length>1&&(t.city=n[1]||""),n.length>2){var i=n[n.length-1],a=i.match(/([A-Z]{2})\s+(\d{5}(-\d{4})?)/);a?(t.state=a[1],t.zipCode=a[2]):t.state=i}}else t.street=e;return t},B=function(e){var t=e.target,n=t.name,i=t.value;p(function(e){return(0,o.Z)((0,a.Z)({},e),(0,S.Z)({},n,i))})},D=(w=(0,i.Z)(function(e){var t,n;return(0,r.__generator)(this,function(i){switch(i.label){case 0:e.preventDefault(),y(""),f(!0),i.label=1;case 1:if(i.trys.push([1,3,4,5]),!m.name.trim())throw Error("Client name is required");return t=[m.street,m.city,m.state,m.zipCode].filter(Boolean).join(", "),[4,(0,E.Qu)(u,(0,o.Z)((0,a.Z)({},m),{address:t}))];case 2:return i.sent(),d(),s(),[3,5];case 3:return n=i.sent(),y((0,K.Z)(n,Error)?n.message:"Failed to update client"),[3,5];case 4:return f(!1),[7];case 5:return[2]}})}),function(e){return w.apply(this,arguments)}),k=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{type:"button",className:$().cancelButton,style:{backgroundColor:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"var(--radius-sm)",padding:"10px 20px",fontSize:"var(--font-md)",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"var(--font-primary)",minHeight:"44px"},onClick:s,disabled:_,children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:$().submitButton,style:{backgroundColor:"var(--ppr-primary)",color:"white",border:"none",borderRadius:"var(--radius-sm)",padding:"10px 20px",fontSize:"var(--font-md)",fontWeight:500,cursor:"pointer",transition:"all 0.2s ease",fontFamily:"var(--font-primary)",minHeight:"44px"},onClick:D,disabled:_||C,children:_?"Saving...":"Save Changes"})]}),M={display:"flex",flexDirection:"column",gap:"6px"},I={fontSize:"var(--font-sm)",fontWeight:500,color:"rgba(255, 255, 255, 0.9)",fontFamily:"var(--font-primary)"},T={padding:"10px 12px",border:"1px solid rgba(30, 115, 190, 0.4)",borderRadius:"var(--radius-sm)",fontSize:"var(--font-md)",transition:"all 0.2s ease",width:"100%",backgroundColor:"rgba(255, 255, 255, 0.15)",color:"white",fontFamily:"var(--font-primary)"};return(0,l.jsx)(Y.Z,{isOpen:n,onClose:s,title:"Edit Client",footer:k,size:"medium",children:C?(0,l.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255, 255, 255, 0.7)"},children:"Loading client data..."}):(0,l.jsxs)("form",{className:$().form,style:{display:"flex",flexDirection:"column",gap:"16px"},onSubmit:D,children:[x&&(0,l.jsx)("div",{className:$().errorMessage,style:{backgroundColor:"rgba(255, 107, 0, 0.2)",color:"rgba(255, 180, 120, 1)",padding:"10px",borderRadius:"var(--radius-sm)",fontSize:"var(--font-sm)",marginBottom:"12px",borderLeft:"3px solid var(--ppr-accent)"},children:x}),(0,l.jsxs)("div",{className:$().formGroup,style:M,children:[(0,l.jsxs)("label",{htmlFor:"name",className:$().label,style:I,children:["Client Name ",(0,l.jsx)("span",{className:$().required,style:{color:"var(--ppr-accent)",marginLeft:"2px"},children:"*"})]}),(0,l.jsx)("input",{id:"name",name:"name",type:"text",value:m.name,onChange:B,className:$().input,style:T,placeholder:"Enter client name",required:!0})]}),(0,l.jsxs)("div",{className:$().formGroup,style:M,children:[(0,l.jsx)("label",{htmlFor:"email",className:$().label,style:I,children:"Email"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:m.email,onChange:B,className:$().input,style:T,placeholder:"Enter email address"})]}),(0,l.jsxs)("div",{className:$().formGroup,style:M,children:[(0,l.jsx)("label",{htmlFor:"phone",className:$().label,style:I,children:"Phone"}),(0,l.jsx)("input",{id:"phone",name:"phone",type:"tel",value:m.phone,onChange:B,className:$().input,style:T,placeholder:"Enter phone number"})]}),(0,l.jsxs)("div",{className:$().formGroup,style:M,children:[(0,l.jsx)("label",{htmlFor:"street",className:$().label,style:I,children:"Street Address"}),(0,l.jsx)("input",{id:"street",name:"street",type:"text",value:m.street,onChange:B,className:$().input,style:T,placeholder:"Enter street address"})]}),(0,l.jsxs)("div",{className:$().formRow,style:{display:"flex",gap:"16px"},children:[(0,l.jsxs)("div",{className:$().formGroup,style:(0,o.Z)((0,a.Z)({},M),{flex:1}),children:[(0,l.jsx)("label",{htmlFor:"city",className:$().label,style:I,children:"City"}),(0,l.jsx)("input",{id:"city",name:"city",type:"text",value:m.city,onChange:B,className:$().input,style:T,placeholder:"Enter city"})]}),(0,l.jsxs)("div",{className:$().formGroup,style:(0,o.Z)((0,a.Z)({},M),{width:"100px"}),children:[(0,l.jsx)("label",{htmlFor:"state",className:$().label,style:I,children:"State"}),(0,l.jsx)("input",{id:"state",name:"state",type:"text",value:m.state,onChange:B,className:$().input,style:T,placeholder:"State",maxLength:2})]}),(0,l.jsxs)("div",{className:$().formGroup,style:(0,o.Z)((0,a.Z)({},M),{width:"120px"}),children:[(0,l.jsx)("label",{htmlFor:"zipCode",className:$().label,style:I,children:"Zip Code"}),(0,l.jsx)("input",{id:"zipCode",name:"zipCode",type:"text",value:m.zipCode,onChange:B,className:$().input,style:T,placeholder:"Zip code",maxLength:10})]})]}),(0,l.jsxs)("div",{className:$().formGroup,style:M,children:[(0,l.jsx)("label",{htmlFor:"status",className:$().label,style:I,children:"Status"}),(0,l.jsxs)("select",{id:"status",name:"status",value:m.status,onChange:B,className:$().select,style:T,children:[(0,l.jsx)("option",{value:"prospect",children:"Prospect"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})})},et=n(2367),en=function(){var e,t=(0,et.vR)().quotes,n=(0,h.useRouter)(),d=n.query.id,_=(0,c.useState)(null),C=_[0],b=_[1],N=(0,c.useMemo)(function(){return d&&t?t.filter(function(e){return String(e.clientId)===String(d)}).map(function(e){return{id:e.id,title:e.title||"Quote #".concat(e.id),status:e.status||"draft",date:e.date||e.created_at||new Date().toISOString().split("T")[0]}}):[]},[t,d]),P=(0,c.useState)([]),D=P[0],k=P[1],M=(0,c.useState)(!0),S=M[0],I=M[1],T=(0,c.useState)(null),A=T[0],F=T[1],Z=(0,c.useState)(!1),L=Z[0],z=Z[1];(0,c.useEffect)(function(){d&&(console.log("Client ID changed, fetching data for ID:",d),R())},[d]);var R=(e=(0,i.Z)(function(){var e,n,i,l,c,u,h;return(0,r.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),I(!0),[4,E.NF.getById(d)];case 1:return e=n.sent(),console.log("Client data from API:",e),console.log("Client address from API:",null==e?void 0:e.address),console.log("Current client ID:",d,"Type:",void 0===d?"undefined":(0,s.Z)(d)),[4,E.hY.getAll()];case 2:return i=n.sent().filter(function(e){return String(e.clientId)===String(d)}).map(function(e){return{id:e.id,title:e.title,status:e.status,date:e.startDate||e.created_at}}),c=N.filter(function(e){var t;return(null===(t=e.status)||void 0===t?void 0:t.toLowerCase())==="accepted"}).reduce(function(e,n){var i;return e+((null===(i=t.find(function(e){return e.id===n.id}))||void 0===i?void 0:i.total)||0)},0),b((0,o.Z)((0,a.Z)({},e),{lifetimeValue:c})),k(i),F(null),[3,5];case 3:return h=n.sent(),console.error("Failed to fetch client:",h),F("Failed to load client details. Please try again."),[3,5];case 4:return I(!1),[7];case 5:return[2]}})}),function(){return e.apply(this,arguments)});return S?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u(),{children:[(0,l.jsx)("title",{children:"PPR - Loading Client"}),(0,l.jsx)("meta",{name:"description",content:"Paver Pressure and Repair Client Details"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(p.Z,{title:"PPR",showBackButton:!0,backHref:"/clients"}),(0,l.jsxs)("div",{className:f().loadingContainer,children:[(0,l.jsx)("div",{className:f().loadingSpinner}),(0,l.jsx)("p",{children:"Loading client details..."})]})]})]}):A?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u(),{children:[(0,l.jsx)("title",{children:"PPR - Error"}),(0,l.jsx)("meta",{name:"description",content:"Paver Pressure and Repair Client Details"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(p.Z,{title:"PPR",showBackButton:!0,backHref:"/clients"}),(0,l.jsxs)("div",{className:f().errorContainer,children:[(0,l.jsx)("h2",{children:"Error"}),(0,l.jsx)("p",{children:A}),(0,l.jsx)("button",{className:f().retryButton,onClick:R,children:"Retry"})]})]})]}):C?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u(),{children:[(0,l.jsxs)("title",{children:["PPR - ",C.name]}),(0,l.jsx)("meta",{name:"description",content:"Paver Pressure and Repair - Client: ".concat(C.name)}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(p.Z,{title:"PPR",showBackButton:!0,backHref:"/clients"}),(0,l.jsxs)("main",{className:f().main,children:[(0,l.jsx)("div",{className:f().pageHeader,children:(0,l.jsxs)("div",{className:f().titleContainer,children:[(0,l.jsx)(x.Z,{className:f().pageIcon}),(0,l.jsx)("h1",{className:f().pageTitle,children:C.name}),C.phone||C.email?(0,l.jsxs)("div",{className:f().titleActions,children:[C.email&&(0,l.jsx)(j.Z,{email:C.email,clientId:C.id.toString()}),C.phone&&(0,l.jsx)(y.Z,{phone:C.phone,clientId:C.id.toString()})]}):null]})}),(0,l.jsxs)("div",{className:f().sectionContainer,children:[(0,l.jsx)("div",{className:f().detailsHeader,children:(0,l.jsx)("div",{className:f().headerLeft,children:(0,l.jsx)("h2",{children:"Recent Activity"})})}),(0,l.jsx)(V,{clientId:C.id.toString()})]}),(0,l.jsxs)("div",{className:f().sectionContainer,children:[(0,l.jsxs)("div",{className:f().detailsHeader,children:[(0,l.jsx)("div",{className:f().headerLeft,children:(0,l.jsx)(v.Z,{type:function(e){switch(e.toLowerCase()){case"prospect":return"pending";case"active":return"approved";default:return"default"}}(C.status),label:C.status})}),(0,l.jsx)("div",{className:f().headerRight,children:(0,l.jsx)(w,{onClick:function(){return z(!0)},className:f().editIconButton})})]}),(0,l.jsxs)("div",{className:f().clientDetails,children:[void 0!==C.lifetimeValue&&(0,l.jsxs)("div",{className:f().lifetimeValue,children:[(0,l.jsx)("h3",{children:"Lifetime Value"}),(0,l.jsx)("p",{className:f().valueAmount,children:(0,g.x)(C.lifetimeValue)})]}),C.address&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:f().addressContainer,children:(0,l.jsx)("p",{className:f().addressText,children:C.address})}),C.address?(0,l.jsx)(J,{address:C.address}):(0,l.jsx)("div",{className:f().emptyState,children:"No address provided for this client."})]})]})]}),(0,l.jsxs)("div",{className:f().sectionContainer,children:[(0,l.jsxs)("div",{className:f().detailsHeader,children:[(0,l.jsx)("div",{className:f().headerLeft,children:(0,l.jsx)("h2",{children:"Quotes"})}),(0,l.jsx)("div",{className:f().headerRight,children:(0,l.jsx)(B,{onClick:function(){return n.push("/install-quote?clientId=".concat(C.id))},className:f().editIconButton})})]}),N.length>0?(0,l.jsx)("div",{className:f().tableContainer,children:(0,l.jsxs)("table",{className:f().lineItemsTable,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Quote"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:N.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.title}),(0,l.jsx)("td",{children:(0,l.jsx)(v.Z,{type:"draft"===e.status.toLowerCase()?"default":"sent"===e.status.toLowerCase()?"pending":"accepted"===e.status.toLowerCase()?"approved":"declined"===e.status.toLowerCase()?"rejected":"default",label:e.status})}),(0,l.jsx)("td",{children:(0,g.p)(e.date)}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:f().viewButton,onClick:function(){return n.push("/quotes/".concat(e.id))},children:"View"})})]},e.id)})})]})}):(0,l.jsx)("p",{className:f().emptyState,children:"No quotes found for this client."})]}),(0,l.jsxs)("div",{className:f().sectionContainer,children:[(0,l.jsx)("h2",{children:"Projects"}),D.length>0?(0,l.jsx)("div",{className:f().tableContainer,children:(0,l.jsxs)("table",{className:f().lineItemsTable,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Project"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:D.map(function(e){return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.title}),(0,l.jsx)("td",{children:(0,l.jsx)(v.Z,{type:"pending"===e.status.toLowerCase()?"pending":"active"===e.status.toLowerCase()?"approved":"completed"===e.status.toLowerCase()?"completed":"cancelled"===e.status.toLowerCase()?"rejected":"default",label:e.status})}),(0,l.jsx)("td",{children:(0,g.p)(e.date)}),(0,l.jsx)("td",{children:(0,l.jsx)("button",{className:f().viewButton,onClick:function(){return n.push("/projects/".concat(e.id))},children:"View"})})]},e.id)})})]})}):(0,l.jsx)("p",{className:f().emptyState,children:"No projects found for this client."})]}),(0,l.jsx)("div",{className:f().sectionContainer,children:(0,l.jsx)("div",{className:f().footer,children:(0,l.jsxs)("div",{className:f().metaInfo,children:[(0,l.jsxs)("p",{children:["Created: ",(0,g.p)(C.created_at)]}),(0,l.jsxs)("p",{children:["Last Updated: ",(0,g.p)(C.updated_at)]})]})})})]}),C&&(0,l.jsx)(ee,{isOpen:L,onClose:function(){return z(!1)},onClientUpdated:R,clientId:C.id.toString()})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u(),{children:[(0,l.jsx)("title",{children:"PPR - Client Not Found"}),(0,l.jsx)("meta",{name:"description",content:"Paver Pressure and Repair Client Details"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(p.Z,{title:"PPR",showBackButton:!0,backHref:"/clients"}),(0,l.jsxs)("div",{className:f().notFoundContainer,children:[(0,l.jsx)("h2",{children:"Client Not Found"}),(0,l.jsx)("p",{children:"The requested client could not be found."}),(0,l.jsx)("button",{className:f().backButton,onClick:function(){return n.push("/clients")},children:"Back to Clients"})]})]})]})}},6794:function(e,t,n){"use strict";n.d(t,{p:function(){return a},x:function(){return i}});var i=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e)},a=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},7192:function(e){e.exports={activityContainer:"ActivityChat_activityContainer__YsT2G",chatMessages:"ActivityChat_chatMessages__P2lyC",activityItem:"ActivityChat_activityItem___Huxw",fadeIn:"ActivityChat_fadeIn__z0329",specialEventContainer:"ActivityChat_specialEventContainer__h6gq0",expanded:"ActivityChat_expanded__Uj3gS",specialEventTitle:"ActivityChat_specialEventTitle__pqIt_",titleContent:"ActivityChat_titleContent__9otq3",eventTitleText:"ActivityChat_eventTitleText__eokPl",activityIcon:"ActivityChat_activityIcon__FKwS4",specialEventContent:"ActivityChat_specialEventContent__V0Rqz",specialEventMeta:"ActivityChat_specialEventMeta__erL1y",activityDate:"ActivityChat_activityDate__CXxPj",systemMessage:"ActivityChat_systemMessage__1FxNX",userMessage:"ActivityChat_userMessage__CusJ8",otherMessage:"ActivityChat_otherMessage__xrKkd",activityContent:"ActivityChat_activityContent__HztiV",activityTitle:"ActivityChat_activityTitle__MmSqW",chatInputContainer:"ActivityChat_chatInputContainer__LpJE1",inputButtonWrapper:"ActivityChat_inputButtonWrapper__r10FN",chatFooter:"ActivityChat_chatFooter___mJT9",noteTypeSelect:"ActivityChat_noteTypeSelect__IMY05",noteInput:"ActivityChat_noteInput__1UPZ7",noteButton:"ActivityChat_noteButton__I2GnK",sendButton:"ActivityChat_sendButton__zjXFn",expandedContent:"ActivityChat_expandedContent__4S3_W",buttonContainer:"ActivityChat_buttonContainer__cxFt7",addNoteButton:"ActivityChat_addNoteButton__Oy_O4",viewButton:"ActivityChat_viewButton__biFSM",longPressing:"ActivityChat_longPressing__Akzgu",actionOverlay:"ActivityChat_actionOverlay__NSfwr",deleteOverlay:"ActivityChat_deleteOverlay__QZ_Ut",actionButtons:"ActivityChat_actionButtons__FWRHs",deleteButton:"ActivityChat_deleteButton__HERgR",editButton:"ActivityChat_editButton__Bp5bd",bubbleNoteInput:"ActivityChat_bubbleNoteInput__FjzIc",noteInputWrapper:"ActivityChat_noteInputWrapper__gbb0Z",noteList:"ActivityChat_noteList__LF_Bv",noteSender:"ActivityChat_noteSender__c5XNo",noteContent:"ActivityChat_noteContent__5nB1t",noteTimestamp:"ActivityChat_noteTimestamp__5d6aY",editContainer:"ActivityChat_editContainer__5pdke",editInput:"ActivityChat_editInput__t9kkt",editActions:"ActivityChat_editActions__m9K56",saveButton:"ActivityChat_saveButton__lYImk",cancelButton:"ActivityChat_cancelButton__K0yP2",chatInput:"ActivityChat_chatInput__tQkSQ"}},7869:function(e){e.exports={actionOverlay:"BlurActionMenu_actionOverlay__JBTY1",hidden:"BlurActionMenu_hidden__BDQby",actionButtons:"BlurActionMenu_actionButtons__gvtDz",deleteButton:"BlurActionMenu_deleteButton__6i27V",editButton:"BlurActionMenu_editButton__fGg_j",longPressing:"BlurActionMenu_longPressing__fhVe4"}},1150:function(e){e.exports={modalOverlay:"Modal_modalOverlay__ydbcy",fadeIn:"Modal_fadeIn__5UE9U",modalContainer:"Modal_modalContainer__l_SPa",slideIn:"Modal_slideIn__vqqnD",small:"Modal_small__PvTRg",medium:"Modal_medium__QaCzZ",large:"Modal_large__uEHZt",modalHeader:"Modal_modalHeader__Bu8is",modalTitle:"Modal_modalTitle__G5VDf",closeButton:"Modal_closeButton__e9znE",modalContent:"Modal_modalContent__xzOCj",modalFooter:"Modal_modalFooter___AoH1"}},9179:function(e){e.exports={pageContainer:"PageContainer_pageContainer__ntg2Q"}},4353:function(e){e.exports={mapContainer:"ClientMap_mapContainer__5eqqG",loadingContainer:"ClientMap_loadingContainer__mdvMq",errorContainer:"ClientMap_errorContainer__keCrP",mapWarning:"ClientMap_mapWarning__jxb4a",fallbackLink:"ClientMap_fallbackLink__c5vgP",infoWindow:"ClientMap_infoWindow__W_INg",locationButton:"ClientMap_locationButton__LnXrf"}},6416:function(e){e.exports={form:"FormModals_form__yWUwu",formGroup:"FormModals_formGroup__Ol63z",label:"FormModals_label__camRF",required:"FormModals_required__qDUIR",input:"FormModals_input__mWgyN",select:"FormModals_select__5TqsA",textarea:"FormModals_textarea__WJFKq",errorMessage:"FormModals_errorMessage___VTMc",submitButton:"FormModals_submitButton___OiP2",cancelButton:"FormModals_cancelButton__XtOwO"}},9891:function(e){e.exports={main:"DetailPage_main__IA27p",pageHeader:"DetailPage_pageHeader__RKB3a",detailContainer:"DetailPage_detailContainer__NZxZz",tableContainer:"DetailPage_tableContainer__TT_9m",section:"DetailPage_section__9U5UC",titleContainer:"DetailPage_titleContainer__FgUkl",titleActions:"DetailPage_titleActions__3pXwy",actionButton:"DetailPage_actionButton__UanH9",pageIcon:"DetailPage_pageIcon__htFsx",pageTitle:"DetailPage_pageTitle__kFQmM",header:"DetailPage_header__fH9Oj",detailsHeader:"DetailPage_detailsHeader__7iX2e",headerLeft:"DetailPage_headerLeft__51xRV",clientDetails:"DetailPage_clientDetails__3tA9i",lifetimeValue:"DetailPage_lifetimeValue__LJQ2S",valueAmount:"DetailPage_valueAmount__p_ryn",headerRight:"DetailPage_headerRight__F8Ss3",title:"DetailPage_title__8R2pE",tags:"DetailPage_tags__nk0pG",totalAmount:"DetailPage_totalAmount__ogLrk",editButton:"DetailPage_editButton__d_DtL",infoGrid:"DetailPage_infoGrid__pcygk",infoCard:"DetailPage_infoCard__PE23i",viewButton:"DetailPage_viewButton__7aiWD",sectionContainer:"DetailPage_sectionContainer__LvOnw",descriptionBox:"DetailPage_descriptionBox__T_fj6",lineItemsTable:"DetailPage_lineItemsTable__uGLTc",totalLabel:"DetailPage_totalLabel__I9Ekc",totalValue:"DetailPage_totalValue__8FUE5",footer:"DetailPage_footer__BuDoH",backButton:"DetailPage_backButton__LBUZr",metaInfo:"DetailPage_metaInfo___qyCN",loadingContainer:"DetailPage_loadingContainer__vhCSm",loadingSpinner:"DetailPage_loadingSpinner___c6TB",spin:"DetailPage_spin__qinUm",errorContainer:"DetailPage_errorContainer__MKWkh",notFoundContainer:"DetailPage_notFoundContainer__cMgbl",retryButton:"DetailPage_retryButton__WRQ3M",emptyState:"DetailPage_emptyState__UgkNc",activityContainer:"DetailPage_activityContainer__5hHzD",chatMessages:"DetailPage_chatMessages__b5V_J",activityItem:"DetailPage_activityItem__o1JbF",fadeIn:"DetailPage_fadeIn__7sFOq",systemMessage:"DetailPage_systemMessage__HECvN",userMessage:"DetailPage_userMessage__x6wiE",activityIcon:"DetailPage_activityIcon__90Hj1",activityContent:"DetailPage_activityContent__FJ3YH",activityTitle:"DetailPage_activityTitle__McBJu",activityDate:"DetailPage_activityDate__VINa6",chatInputContainer:"DetailPage_chatInputContainer__q9ux_",chatInput:"DetailPage_chatInput__jMYKS",sendButton:"DetailPage_sendButton__qZ3ZN"}}},function(e){e.O(0,[996,537,630,774,888,179],function(){return e(e.s=4091)}),_N_E=e.O()}]);